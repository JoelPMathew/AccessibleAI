
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Classroom Learning VR - Accessibility VR</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/protyze/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
    
    <!-- VR Entry Overlay -->
    <div id="vr-overlay" style="
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    ">
      <div style="text-align: center; max-width: 600px; padding: 40px;">
        <h1 style="font-size: 3rem; margin-bottom: 20px;">üéì Classroom Learning VR</h1>
        <p style="font-size: 1.2rem; margin-bottom: 30px; opacity: 0.9;">
          Experience interactive classroom environments designed for educational accessibility. Practice participating in lessons and building academic confidence.
        </p>
        <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
          <button id="enter-vr-btn" style="
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
          ">üöÄ Enter VR Experience</button>
          <button id="exit-vr-btn" style="
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
          ">‚Üê Return to Library</button>
        </div>
        <div style="margin-top: 40px; font-size: 0.9rem; opacity: 0.7;">
          <p>üí° Use WASD keys to move, mouse to look around, and click on objects to interact</p>
          <p>‚ôø Full accessibility support with keyboard navigation and assistive devices</p>
        </div>
      </div>
    </div>

    <!-- VR Controls Panel -->
    <div id="vr-controls" style="
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 100;
      display: none;
      background: rgba(0, 0, 0, 0.8);
      padding: 15px;
      border-radius: 10px;
      color: white;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    ">
      <div style="display: flex; gap: 10px; flex-wrap: wrap;">
        <button id="pause-btn" style="
          background: #f39c12;
          color: white;
          border: none;
          padding: 10px 20px;
          border-radius: 8px;
          cursor: pointer;
        ">‚è∏Ô∏è Pause</button>
        <button id="help-btn" style="
          background: #3498db;
          color: white;
          border: none;
          padding: 10px 20px;
          border-radius: 8px;
          cursor: pointer;
        ">‚ùì Help</button>
        <button id="exit-scenario-btn" style="
          background: #e74c3c;
          color: white;
          border: none;
          padding: 10px 20px;
          border-radius: 8px;
          cursor: pointer;
        ">üö™ Exit</button>
      </div>
    </div>

    <!-- Pause Menu -->
    <div id="pause-menu" style="
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
      color: white;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    ">
      <div style="text-align: center; max-width: 400px; padding: 40px;">
        <h2 style="font-size: 2rem; margin-bottom: 30px;">‚è∏Ô∏è Paused</h2>
        <div style="display: flex; flex-direction: column; gap: 15px;">
          <button id="resume-btn" style="
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
          ">‚ñ∂Ô∏è Resume</button>
          <button id="restart-btn" style="
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
          ">üîÑ Restart</button>
          <button id="settings-btn" style="
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
          ">‚öôÔ∏è Settings</button>
          <button id="exit-pause-btn" style="
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
          ">üö™ Exit to Library</button>
        </div>
      </div>
    </div>

    <script>
      // Blackboard interaction: change text on click
      AFRAME.registerComponent('blackboard-click', {
        init: function () {
          var el = this.el;
          el.addEventListener('click', function () {
            var textEl = document.querySelector('#boardText');
            textEl.setAttribute('value', 'Hello Students!\nToday we learn 3D VR.');
          });
        }
      });
    </script>
    <style>body { margin: 0; overflow: hidden; }</style>
  </head>
  <body>
    <a-scene shadow="type: pcfsoft" background="color: #e0e0e0" cursor="rayOrigin: mouse">

      <!-- Camera -->
      <a-entity id="cameraRig" position="0 1.6 12">
        <a-entity camera look-controls wasd-controls>
          <a-cursor color="#FF0000" fuse="true" fuse-timeout="500"></a-cursor>
        </a-entity>
      </a-entity>

      <!-- Lighting -->
      <a-entity light="type: ambient; intensity: 0.5"></a-entity>
      <a-entity light="type: directional; intensity: 0.8; castShadow: true" position="10 10 10"></a-entity>

      <!-- Floor -->
      <a-plane rotation="-90 0 0" width="20" height="20" color="#d2b48c" shadow="receive: true"></a-plane>

      <!-- Walls -->
      <a-box position="0 2.5 -10" width="20" height="5" depth="0.2" color="#ffffff" shadow></a-box>
      <a-box position="-10 2.5 0" width="0.2" height="5" depth="20" color="#ffffff" shadow></a-box>
      <a-box position="10 2.5 0" width="0.2" height="5" depth="20" color="#ffffff" shadow></a-box>
      <a-box position="0 2.5 10" width="20" height="5" depth="0.2" color="#ffffff" shadow></a-box>

      <!-- Windows -->
      <a-box position="-9.8 2 5" width="0.1" height="3" depth="5" color="#87ceeb" opacity="0.7"></a-box>
      <a-box position="9.8 2 5" width="0.1" height="3" depth="5" color="#87ceeb" opacity="0.7"></a-box>

      <!-- Blackboard -->
      <a-box position="0 2 -9.9" width="10" height="3" depth="0.1" color="#0a0a0a" shadow blackboard-click></a-box>
      <a-entity id="boardText" position="-4 2 -9.89" text="value: Click the board to write; color: white; width: 8;"></a-entity>

      <!-- Teacher (animated) -->
      <a-entity position="0 0.5 -6" animation="property: rotation; to: 0 10 0; dir: alternate; dur: 2000; loop: true">
        <a-cylinder height="1.5" radius="0.3" color="#ffcc99"></a-cylinder> <!-- body -->
        <a-sphere position="0 1.5 0" radius="0.25" color="#ffcc99"></a-sphere> <!-- head -->
      </a-entity>

      <!-- Teacher Desk -->
      <a-entity position="0 0.75 -7">
        <a-box width="4" height="0.1" depth="2" color="#654321" shadow></a-box>
        <a-box position="-1.75 -0.25 0" width="0.5" height="0.5" depth="2" color="#5a3e1b" shadow></a-box>
        <a-box position="1.75 -0.25 0" width="0.5" height="0.5" depth="2" color="#5a3e1b" shadow></a-box>
        <a-box position="0 -0.25 0" width="3" height="0.5" depth="0.1" color="#654321"></a-box>
      </a-entity>

      <!-- Student benches and chairs with students -->
      <a-entity id="studentArea">
        <!-- Function to generate a bench + chair + student -->
        <a-entity id="bench1" position="-5 0 4">
          <a-box position="0 0.5 0" width="3" height="0.1" depth="1" color="#8B4513" shadow></a-box>
          <a-box position="-1 0 0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="1 0 0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="-1 0 -0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="1 0 -0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-entity position="0 -0.5 -1.2">
            <a-box width="1" height="0.1" depth="1" color="#654321"></a-box>
            <a-box position="0 0.5 -0.45" width="1" height="1" depth="0.1" color="#654321"></a-box>
            <a-box position="-0.45 -0.25 0" width="0.1" height="0.5" depth="1" color="#5a2d0c"></a-box>
            <a-box position="0.45 -0.25 0" width="0.1" height="0.5" depth="1" color="#5a2d0c"></a-box>
            <!-- Student figure -->
            <a-cylinder position="0 0.3 0" height="1.2" radius="0.2" color="#ffcc99"></a-cylinder>
            <a-sphere position="0 0.9 0" radius="0.25" color="#ffcc99"></a-sphere>
          </a-entity>
        </a-entity>

        <!-- Duplicate the remaining 5 rows using same pattern with position offsets -->
        <a-entity id="bench2" position="0 0 4" rotation="0 0 0">
          <a-box position="0 0.5 0" width="3" height="0.1" depth="1" color="#8B4513" shadow></a-box>
          <a-box position="-1 0 0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="1 0 0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="-1 0 -0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="1 0 -0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-entity position="0 -0.5 -1.2">
            <a-box width="1" height="0.1" depth="1" color="#654321"></a-box>
            <a-box position="0 0.5 -0.45" width="1" height="1" depth="0.1" color="#654321"></a-box>
            <a-box position="-0.45 -0.25 0" width="0.1" height="0.5" depth="1" color="#5a2d0c"></a-box>
            <a-box position="0.45 -0.25 0" width="0.1" height="0.5" depth="1" color="#5a2d0c"></a-box>
            <a-cylinder position="0 0.3 0" height="1.2" radius="0.2" color="#ffcc99"></a-cylinder>
            <a-sphere position="0 0.9 0" radius="0.25" color="#ffcc99"></a-sphere>
          </a-entity>
        </a-entity>

        <!-- Row 3 -->
        <a-entity id="bench3" position="5 0 4">
          <a-box position="0 0.5 0" width="3" height="0.1" depth="1" color="#8B4513" shadow></a-box>
          <a-box position="-1 0 0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="1 0 0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="-1 0 -0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="1 0 -0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-entity position="0 -0.5 -1.2">
            <a-box width="1" height="0.1" depth="1" color="#654321"></a-box>
            <a-box position="0 0.5 -0.45" width="1" height="1" depth="0.1" color="#654321"></a-box>
            <a-box position="-0.45 -0.25 0" width="0.1" height="0.5" depth="1" color="#5a2d0c"></a-box>
            <a-box position="0.45 -0.25 0" width="0.1" height="0.5" depth="1" color="#5a2d0c"></a-box>
            <a-cylinder position="0 0.3 0" height="1.2" radius="0.2" color="#ffcc99"></a-cylinder>
            <a-sphere position="0 0.9 0" radius="0.25" color="#ffcc99"></a-sphere>
          </a-entity>
        </a-entity>

        <!-- Row 4 -->
        <a-entity id="bench4" position="-5 0 2">
          <a-box position="0 0.5 0" width="3" height="0.1" depth="1" color="#8B4513" shadow></a-box>
          <a-box position="-1 0 0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="1 0 0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="-1 0 -0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="1 0 -0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-entity position="0 -0.5 -1.2">
            <a-box width="1" height="0.1" depth="1" color="#654321"></a-box>
            <a-box position="0 0.5 -0.45" width="1" height="1" depth="0.1" color="#654321"></a-box>
            <a-box position="-0.45 -0.25 0" width="0.1" height="0.5" depth="1" color="#5a2d0c"></a-box>
            <a-box position="0.45 -0.25 0" width="0.1" height="0.5" depth="1" color="#5a2d0c"></a-box>
            <a-cylinder position="0 0.3 0" height="1.2" radius="0.2" color="#ffcc99"></a-cylinder>
            <a-sphere position="0 0.9 0" radius="0.25" color="#ffcc99"></a-sphere>
          </a-entity>
        </a-entity>

        <!-- Row 5 -->
        <a-entity id="bench5" position="0 0 2">
          <a-box position="0 0.5 0" width="3" height="0.1" depth="1" color="#8B4513" shadow></a-box>
          <a-box position="-1 0 0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="1 0 0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="-1 0 -0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="1 0 -0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-entity position="0 -0.5 -1.2">
            <a-box width="1" height="0.1" depth="1" color="#654321"></a-box>
            <a-box position="0 0.5 -0.45" width="1" height="1" depth="0.1" color="#654321"></a-box>
            <a-box position="-0.45 -0.25 0" width="0.1" height="0.5" depth="1" color="#5a2d0c"></a-box>
            <a-box position="0.45 -0.25 0" width="0.1" height="0.5" depth="1" color="#5a2d0c"></a-box>
            <a-cylinder position="0 0.3 0" height="1.2" radius="0.2" color="#ffcc99"></a-cylinder>
            <a-sphere position="0 0.9 0" radius="0.25" color="#ffcc99"></a-sphere>
          </a-entity>
        </a-entity>

        <!-- Row 6 -->
        <a-entity id="bench6" position="5 0 2">
          <a-box position="0 0.5 0" width="3" height="0.1" depth="1" color="#8B4513" shadow></a-box>
          <a-box position="-1 0 0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="1 0 0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="-1 0 -0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-box position="1 0 -0.4" width="0.1" height="1" depth="0.1" color="#5a2d0c"></a-box>
          <a-entity position="0 -0.5 -1.2">
            <a-box width="1" height="0.1" depth="1" color="#654321"></a-box>
            <a-box position="0 0.5 -0.45" width="1" height="1" depth="0.1" color="#654321"></a-box>
            <a-box position="-0.45 -0.25 0" width="0.1" height="0.5" depth="1" color="#5a2d0c"></a-box>
            <a-box position="0.45 -0.25 0" width="0.1" height="0.5" depth="1" color="#5a2d0c"></a-box>
            <a-cylinder position="0 0.3 0" height="1.2" radius="0.2" color="#ffcc99"></a-cylinder>
            <a-sphere position="0 0.9 0" radius="0.25" color="#ffcc99"></a-sphere>
          </a-entity>
        </a-entity>

      </a-entity>

      <!-- Ceiling lights -->
      <a-cylinder position="0 4.8 0" radius="0.1" height="0.2" color="#ffffff" light="type: point; intensity: 0.5;"></a-cylinder>
      <a-cylinder position="5 4.8 5" radius="0.1" height="0.2" color="#ffffff" light="type: point; intensity: 0.5;"></a-cylinder>
      <a-cylinder position="-5 4.8 5" radius="0.1" height="0.2" color="#ffffff" light="type: point; intensity: 0.5;"></a-cylinder>

    </a-scene>

    <!-- VR Navigation and Controls JavaScript -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const vrOverlay = document.getElementById('vr-overlay');
        const vrControls = document.getElementById('vr-controls');
        const pauseMenu = document.getElementById('pause-menu');
        const scene = document.querySelector('a-scene');
        
        // VR Entry/Exit buttons
        document.getElementById('enter-vr-btn').addEventListener('click', function() {
          vrOverlay.style.display = 'none';
          vrControls.style.display = 'block';
          if (scene.enterVR) {
            scene.enterVR();
          }
        });
        
        document.getElementById('exit-vr-btn').addEventListener('click', function() {
          window.location.href = '../index.html';
        });
        
        // VR Controls
        document.getElementById('pause-btn').addEventListener('click', function() {
          pauseMenu.style.display = 'flex';
          vrControls.style.display = 'none';
        });
        
        document.getElementById('help-btn').addEventListener('click', function() {
          alert('Classroom VR Help:\n\n‚Ä¢ Use WASD keys to move around\n‚Ä¢ Mouse to look around\n‚Ä¢ Click on the blackboard to interact\n‚Ä¢ Press Escape to pause\n‚Ä¢ Press Tab to toggle controls\n‚Ä¢ Press F1 for this help');
        });
        
        document.getElementById('exit-scenario-btn').addEventListener('click', function() {
          if (confirm('Are you sure you want to exit the classroom scenario?')) {
            window.location.href = '../index.html';
          }
        });
        
        // Pause Menu
        document.getElementById('resume-btn').addEventListener('click', function() {
          pauseMenu.style.display = 'none';
          vrControls.style.display = 'block';
        });
        
        document.getElementById('restart-btn').addEventListener('click', function() {
          if (confirm('Are you sure you want to restart the classroom scenario?')) {
            location.reload();
          }
        });
        
        document.getElementById('settings-btn').addEventListener('click', function() {
          alert('Settings:\n\n‚Ä¢ Adjust volume in browser settings\n‚Ä¢ VR headset settings in browser VR options\n‚Ä¢ Accessibility options in browser settings');
        });
        
        document.getElementById('exit-pause-btn').addEventListener('click', function() {
          window.location.href = '../index.html';
        });
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
          switch(event.key) {
            case 'Escape':
              if (pauseMenu.style.display === 'flex') {
                pauseMenu.style.display = 'none';
                vrControls.style.display = 'block';
              } else {
                pauseMenu.style.display = 'flex';
                vrControls.style.display = 'none';
              }
              break;
            case 'Tab':
              event.preventDefault();
              vrControls.style.display = vrControls.style.display === 'none' ? 'block' : 'none';
              break;
            case 'F1':
              event.preventDefault();
              alert('Classroom VR Help:\n\n‚Ä¢ Use WASD keys to move around\n‚Ä¢ Mouse to look around\n‚Ä¢ Click on the blackboard to interact\n‚Ä¢ Press Escape to pause\n‚Ä¢ Press Tab to toggle controls\n‚Ä¢ Press F1 for this help');
              break;
          }
        });
        
        // Auto-hide VR controls after inactivity
        let controlsTimeout;
        function showControls() {
          vrControls.style.display = 'block';
          clearTimeout(controlsTimeout);
          controlsTimeout = setTimeout(() => {
            if (pauseMenu.style.display !== 'flex') {
              vrControls.style.display = 'none';
            }
          }, 5000);
        }
        
        document.addEventListener('mousemove', showControls);
        document.addEventListener('keydown', showControls);
        
        // Fullscreen toggle
        function toggleFullscreen() {
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
          } else {
            document.exitFullscreen();
          }
        }
        
        // Add fullscreen button to VR controls
        const fullscreenBtn = document.createElement('button');
        fullscreenBtn.innerHTML = '‚õ∂ Fullscreen';
        fullscreenBtn.style.cssText = `
          background: #8e44ad;
          color: white;
          border: none;
          padding: 10px 20px;
          border-radius: 8px;
          cursor: pointer;
        `;
        fullscreenBtn.addEventListener('click', toggleFullscreen);
        document.getElementById('vr-controls').querySelector('div').appendChild(fullscreenBtn);
        
        // VR headset detection
        if (navigator.xr) {
          navigator.xr.isSessionSupported('immersive-vr').then(function(supported) {
            if (supported) {
              console.log('VR headset supported');
            } else {
              console.log('VR headset not supported');
            }
          });
        }
        
        // Session progress tracking
        const sessionStart = Date.now();
        let interactions = 0;
        
        // Track interactions
        document.addEventListener('click', function() {
          interactions++;
        });
        
        // Save session data on exit
        window.addEventListener('beforeunload', function() {
          const sessionData = {
            scenario: 'classroom',
            duration: Date.now() - sessionStart,
            interactions: interactions,
            timestamp: new Date().toISOString()
          };
          
          // Save to localStorage
          const sessions = JSON.parse(localStorage.getItem('vrSessions') || '[]');
          sessions.push(sessionData);
          localStorage.setItem('vrSessions', JSON.stringify(sessions));
        });
      });
    </script>
  </body>
</html>