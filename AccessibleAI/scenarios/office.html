
<!--
  A‑Frame Airport Simulation — single‑file demo
  Features: check‑in counters, ticket counter, boarding gate, animated door, signage,
  soft shadows, mouse click interaction, WASD + mouse to move.
  Save this file as airport.html and open in a desktop browser.
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Office Simulator VR - Accessibility VR</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    
    <!-- VR Entry Overlay -->
    <div id="vr-overlay" style="
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    ">
      <div style="text-align: center; max-width: 600px; padding: 40px;">
        <h1 style="font-size: 3rem; margin-bottom: 20px;">🏢 Office Simulator VR</h1>
        <p style="font-size: 1.2rem; margin-bottom: 30px; opacity: 0.9;">
          Experience a professional office environment designed for workplace accessibility. Practice navigating office spaces, using office equipment, and building confidence for professional work environments.
        </p>
        <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
          <button id="enter-vr-btn" style="
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
          ">🚀 Enter VR Experience</button>
          <button id="exit-vr-btn" style="
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
          ">← Return to Library</button>
        </div>
        <div style="margin-top: 40px; font-size: 0.9rem; opacity: 0.7;">
          <p>💡 Use WASD keys to move, mouse to look around, and click on objects to interact</p>
          <p>♿ Full accessibility support with keyboard navigation and assistive devices</p>
        </div>
      </div>
    </div>

    <!-- VR Controls Panel -->
    <div id="vr-controls" style="
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 100;
      display: none;
      background: rgba(0, 0, 0, 0.8);
      padding: 15px;
      border-radius: 10px;
      color: white;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    ">
      <div style="display: flex; gap: 10px; flex-wrap: wrap;">
        <button id="pause-btn" style="
          background: #f39c12;
          color: white;
          border: none;
          padding: 10px 20px;
          border-radius: 8px;
          cursor: pointer;
        ">⏸️ Pause</button>
        <button id="help-btn" style="
          background: #3498db;
          color: white;
          border: none;
          padding: 10px 20px;
          border-radius: 8px;
          cursor: pointer;
        ">❓ Help</button>
        <button id="exit-scenario-btn" style="
          background: #e74c3c;
          color: white;
          border: none;
          padding: 10px 20px;
          border-radius: 8px;
          cursor: pointer;
        ">🚪 Exit</button>
      </div>
    </div>

    <!-- Pause Menu -->
    <div id="pause-menu" style="
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
      color: white;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    ">
      <div style="text-align: center; max-width: 400px; padding: 40px;">
        <h2 style="font-size: 2rem; margin-bottom: 30px;">⏸️ Paused</h2>
        <div style="display: flex; flex-direction: column; gap: 15px;">
          <button id="resume-btn" style="
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
          ">▶️ Resume</button>
          <button id="restart-btn" style="
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
          ">🔄 Restart</button>
          <button id="settings-btn" style="
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
          ">⚙️ Settings</button>
          <button id="exit-pause-btn" style="
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
          ">🚪 Exit to Library</button>
        </div>
      </div>
    </div>

    <style>
      body { margin: 0; }
      .hud {
        position: absolute; inset: 16px auto auto 16px; z-index: 2; 
        padding: 8px 12px; border-radius: 12px; backdrop-filter: blur(6px);
        background: rgba(30,30,36,.45); color: #fff; font-family: ui-sans-serif, system-ui;
        box-shadow: 0 8px 24px rgba(0,0,0,.25);
      }
      .hud small{opacity:.8}
    </style>
  </head>
  <body>
    <div class="hud">
      <div><strong>Office Simulator — Demo</strong></div>
      <small>WASD to move • Mouse to look • Click the <em>Access Control</em> to open the door</small>
    </div>

    <a-scene renderer="colorManagement: true; physicallyCorrectLights: true; antialias: true; logarithmicDepthBuffer: true; shadowMapType: pcfsoft" shadow="type: pcfsoft">
      <!-- Camera / Controls -->
      <a-entity id="rig" position="0 1.6 12">
        <a-entity id="camera" camera look-controls wasd-controls="acceleration: 30" 
                  cursor="rayOrigin: mouse" raycaster="objects: .interact"></a-entity>
      </a-entity>

      <!-- Lighting for realism: HDR-ish feel with key, fill, rim, and ambient. -->
      <a-entity light="type: ambient; intensity: 0.45; color: #ffffff"></a-entity>
      <a-entity light="type: directional; intensity: 0.9; castShadow: true" position="-6 10 6" rotation="-45 25 0"></a-entity>
      <a-entity light="type: directional; intensity: 0.5" position="6 8 -6" rotation="-30 -45 0"></a-entity>

      <!-- Floor -->
      <a-plane position="0 0 0" rotation="-90 0 0" width="50" height="30" color="#c9ccd1" shadow="receive: true"></a-plane>

      <!-- Ceiling and lights -->
      <a-plane position="0 6 0" rotation="90 0 0" width="50" height="30" color="#e7e9ee"></a-plane>
      <!-- Light panels -->
      <a-box position="-10 5.8 0" depth="0.2" height="0.1" width="6" color="#f6f7fb" material="emissive: #ffffff; emissiveIntensity: 0.7"></a-box>
      <a-box position="0 5.8 0" depth="0.2" height="0.1" width="6" color="#f6f7fb" material="emissive: #ffffff; emissiveIntensity: 0.7"></a-box>
      <a-box position="10 5.8 0" depth="0.2" height="0.1" width="6" color="#f6f7fb" material="emissive: #ffffff; emissiveIntensity: 0.7"></a-box>

      <!-- Glass wall (terminal facade) -->
      <a-box position="0 3 -15" width="50" height="6" depth="0.2"
             material="color: #b9d4e9; metalness: 0.1; roughness: 0.1; opacity: 0.35; transparent: true"></a-box>
      <a-box position="0 0.1 -15" width="50" height="0.2" depth="0.4" color="#9aa1a9"></a-box>

      <!-- Structural side walls -->
      <a-box position="-25 3 0" width="0.3" height="6" depth="30" color="#dfe3ea"></a-box>
      <a-box position="25 3 0" width="0.3" height="6" depth="30" color="#dfe3ea"></a-box>

      <!-- Decorative floor lines -->
      <a-plane position="0 0.01 4" rotation="-90 0 0" width="50" height="0.05" color="#a0a5ac"></a-plane>
      <a-plane position="0 0.01 -4" rotation="-90 0 0" width="50" height="0.05" color="#a0a5ac"></a-plane>

      <!-- Information board -->
      <a-plane position="0 3 -8" width="10" height="3" color="#111827" shadow="cast: true">
        <a-entity position="0 0 0.01" 
                  text="value: Departures\nA1  Kolkata  12:30  Boarding\nB3  Mumbai   13:05  On Time\nC2  Delhi    13:40  Delayed; align: center; color: #f8fafc; width: 8"></a-entity>
      </a-plane>

      <!-- ROW: Check‑in / Ticket counters -->
      <a-entity id="counters" position="0 0 6">
        <!-- Counter modules -->
        <a-entity position="-12 0 0"> 
          <a-box width="6" height="1.2" depth="2.2" position="0 0.6 0" color="#f0f3f8" shadow="cast: true; receive: true"></a-box>
          <a-box width="6.1" height="0.1" depth="2.3" position="0 1.21 0" color="#c8cdd6"></a-box>
          <a-box width="0.1" height="1.4" depth="2.4" position="-3 0.7 0" color="#c8cdd6"></a-box>
          <a-box width="0.1" height="1.4" depth="2.4" position="3 0.7 0" color="#c8cdd6"></a-box>
          <a-box width="0.05" height="0.7" depth="0.05" position="-2 1.7 0.8" color="#0f172a" shadow="cast: true"></a-box>
          <a-box width="1.2" height="0.7" depth="0.05" position="-1.2 1.7 0.8" color="#1f2937"
                 material="emissive: #0ea5e9; emissiveIntensity: 0.35" shadow="cast: true"></a-box>
          <a-entity position="0 1.6 -1.3" text="value: TICKETING; align: center; width: 4; color: #111827"></a-entity>
        </a-entity>

        <a-entity position="-4 0 0"> 
          <a-box width="6" height="1.2" depth="2.2" position="0 0.6 0" color="#f0f3f8" shadow="cast: true; receive: true"></a-box>
          <a-box width="6.1" height="0.1" depth="2.3" position="0 1.21 0" color="#c8cdd6"></a-box>
          <a-box width="0.05" height="0.7" depth="0.05" position="-2 1.7 0.8" color="#0f172a" shadow="cast: true"></a-box>
          <a-box width="1.2" height="0.7" depth="0.05" position="-1.2 1.7 0.8" color="#1f2937"
                 material="emissive: #22c55e; emissiveIntensity: 0.25" shadow="cast: true"></a-box>
          <a-entity position="0 1.6 -1.3" text="value: CHECK‑IN; align: center; width: 4; color: #111827"></a-entity>
        </a-entity>

        <a-entity position="4 0 0"> 
          <a-box width="6" height="1.2" depth="2.2" position="0 0.6 0" color="#f0f3f8" shadow="cast: true; receive: true"></a-box>
          <a-box width="6.1" height="0.1" depth="2.3" position="0 1.21 0" color="#c8cdd6"></a-box>
          <a-box width="0.05" height="0.7" depth="0.05" position="-2 1.7 0.8" color="#0f172a" shadow="cast: true"></a-box>
          <a-box width="1.2" height="0.7" depth="0.05" position="-1.2 1.7 0.8" color="#1f2937"
                 material="emissive: #22c55e; emissiveIntensity: 0.25" shadow="cast: true"></a-box>
          <a-entity position="0 1.6 -1.3" text="value: CHECK‑IN; align: center; width: 4; color: #111827"></a-entity>
        </a-entity>

        <a-entity position="12 0 0"> 
          <a-box width="6" height="1.2" depth="2.2" position="0 0.6 0" color="#f0f3f8" shadow="cast: true; receive: true"></a-box>
          <a-box width="6.1" height="0.1" depth="2.3" position="0 1.21 0" color="#c8cdd6"></a-box>
          <a-box width="0.05" height="0.7" depth="0.05" position="-2 1.7 0.8" color="#0f172a" shadow="cast: true"></a-box>
          <a-box width="1.2" height="0.7" depth="0.05" position="-1.2 1.7 0.8" color="#1f2937"
                 material="emissive: #f59e0b; emissiveIntensity: 0.25" shadow="cast: true"></a-box>
          <a-entity position="0 1.6 -1.3" text="value: BAG DROP; align: center; width: 4; color: #111827"></a-entity>
        </a-entity>
      </a-entity>

      <!-- Queue posts & ropes -->
      <a-entity id="queues" position="0 0 2">
        <a-entity id="posts">
          <!-- Left row posts -->
          <a-cylinder color="#6b7280" radius="0.05" height="1" position="-14 0.5 4"></a-cylinder>
          <a-cylinder color="#6b7280" radius="0.05" height="1" position="-10 0.5 4"></a-cylinder>
          <a-cylinder color="#6b7280" radius="0.05" height="1" position="-6 0.5 4"></a-cylinder>
          <a-cylinder color="#6b7280" radius="0.05" height="1" position="-2 0.5 4"></a-cylinder>
          <a-cylinder color="#6b7280" radius="0.05" height="1" position="2 0.5 4"></a-cylinder>
          <a-cylinder color="#6b7280" radius="0.05" height="1" position="6 0.5 4"></a-cylinder>
          <a-cylinder color="#6b7280" radius="0.05" height="1" position="10 0.5 4"></a-cylinder>
          <a-cylinder color="#6b7280" radius="0.05" height="1" position="14 0.5 4"></a-cylinder>
        </a-entity>
        <!-- Simple ropes as thin boxes -->
        <a-box color="#9ca3af" depth="0.02" height="0.85" width="28" position="0 0.9 4"></a-box>
      </a-entity>

      <!-- BOARDING GATE A1 area -->
      <a-entity id="gate" position="0 0 -6">
        <!-- Gate signage -->
        <a-plane position="0 3 0.2" width="6" height="1.2" color="#0f172a" shadow="cast: true">
          <a-entity position="0 0 0.01" text="value: GATE A1; align: center; width: 5; color: #f8fafc"></a-entity>
        </a-plane>

        <!-- Gate doorway + animated sliding glass door -->
        <a-box position="0 2 0" width="6.5" height="4" depth="0.3" color="#cfd4dc"></a-box>
        <a-box position="0 0.05 0" width="6.5" height="0.1" depth="0.6" color="#9aa1a9"></a-box>
        <a-box position="-1.7 2 0.16" id="doorLeft" width="1.6" height="3.2" depth="0.05"
               material="color: #b9d4e9; opacity: 0.5; transparent: true"></a-box>
        <a-box position="1.7 2 0.16" id="doorRight" width="1.6" height="3.2" depth="0.05"
               material="color: #b9d4e9; opacity: 0.5; transparent: true"></a-box>

        <!-- Boarding podium with scanner button -->
        <a-box position="-2 0.6 2" width="1.4" height="1.2" depth="0.8" color="#e5e7eb" shadow="cast: true; receive: true"></a-box>
        <a-box position="-2 1.2 2.41" width="0.8" height="0.5" depth="0.08" color="#0b1020" shadow="cast: true"
               material="emissive: #06b6d4; emissiveIntensity: 0.35"></a-box>
        <a-cylinder class="interact" id="scanButton" position="-2 1.1 2.9" radius="0.15" height="0.08" color="#16a34a"
                    shadow="cast: true" material="metalness: 0.2; roughness: 0.4"></a-cylinder>
        <a-entity position="-2 1.5 2.9" text="value: Access Control; align: center; width: 2.5; color: #0f172a"></a-entity>

        <!-- Boarding lane rails -->
        <a-box position="0 0.45 1.2" width="0.08" height="0.9" depth="6" color="#9ca3af"></a-box>
        <a-box position="-1 0.45 1.2" width="0.08" height="0.9" depth="6" color="#9ca3af"></a-box>
      </a-entity>

      <!-- Some seated passenger silhouettes (simple shapes) -->
      <a-entity id="seating" position="12 0 -2">
        <a-box position="0 0.4 0" width="6" height="0.8" depth="0.6" color="#1f2937" shadow="cast: true"></a-box>
        <a-cylinder position="-2 1 0" radius="0.25" height="1.1" color="#4b5563" shadow="cast: true"></a-cylinder>
        <a-sphere position="-2 1.8 0" radius="0.24" color="#4b5563" shadow="cast: true"></a-sphere>
        <a-cylinder position="-0.5 1 0" radius="0.25" height="1.1" color="#4b5563" shadow="cast: true"></a-cylinder>
        <a-sphere position="-0.5 1.8 0" radius="0.24" color="#4b5563" shadow="cast: true"></a-sphere>
      </a-entity>

      <!-- Subtle fog to add depth -->
      <a-entity id="fog" fog="type: exponential; density: 0.015; color: #e9ecf3"></a-entity>

      <!-- Grounded shadows for main props -->
      <a-entity position="0 0 0" shadow="cast: true; receive: true"></a-entity>

      <!-- Scripts: interactivity for the gate door -->
      <script>
        AFRAME.registerComponent('gate-controller', {
          init: function () {
            const btn = document.querySelector('#scanButton');
            const left = document.querySelector('#doorLeft');
            const right = document.querySelector('#doorRight');
            let open = false;
            const openDoors = () => {
              left.setAttribute('animation__l', {
                property: 'position', to: '-2.7 2 0.16', dur: 800, easing: 'easeOutQuad'
              });
              right.setAttribute('animation__r', {
                property: 'position', to: '2.7 2 0.16', dur: 800, easing: 'easeOutQuad'
              });
            };
            const closeDoors = () => {
              left.setAttribute('animation__l', {
                property: 'position', to: '-1.7 2 0.16', dur: 800, easing: 'easeOutQuad'
              });
              right.setAttribute('animation__r', {
                property: 'position', to: '1.7 2 0.16', dur: 800, easing: 'easeOutQuad'
              });
            };
            btn.addEventListener('click', () => {
              open = !open;
              if (open) { openDoors(); btn.setAttribute('color', '#dc2626'); }
              else { closeDoors(); btn.setAttribute('color', '#16a34a'); }
            });
          }
        });
        // Attach to scene once loaded
        document.addEventListener('DOMContentLoaded', () => {
          const scene = document.querySelector('a-scene');
          scene.setAttribute('gate-controller', '');
        });
      </script>

      <!-- VR Navigation and Controls JavaScript -->
      <script>
        document.addEventListener('DOMContentLoaded', function() {
          const vrOverlay = document.getElementById('vr-overlay');
          const vrControls = document.getElementById('vr-controls');
          const pauseMenu = document.getElementById('pause-menu');
          const scene = document.querySelector('a-scene');
          
          // VR Entry/Exit buttons
          document.getElementById('enter-vr-btn').addEventListener('click', function() {
            vrOverlay.style.display = 'none';
            vrControls.style.display = 'block';
            if (scene.enterVR) {
              scene.enterVR();
            }
          });
          
          document.getElementById('exit-vr-btn').addEventListener('click', function() {
            window.location.href = '../index.html';
          });
          
          // VR Controls
          document.getElementById('pause-btn').addEventListener('click', function() {
            pauseMenu.style.display = 'flex';
            vrControls.style.display = 'none';
          });
          
          document.getElementById('help-btn').addEventListener('click', function() {
            alert('Office Simulator VR Help:\n\n• Use WASD keys to move around\n• Mouse to look around\n• Click on the "Access Control" button to open/close the door\n• Press Escape to pause\n• Press Tab to toggle controls\n• Press F1 for this help');
          });
          
          document.getElementById('exit-scenario-btn').addEventListener('click', function() {
            if (confirm('Are you sure you want to exit the office simulator scenario?')) {
              window.location.href = '../index.html';
            }
          });
          
          // Pause Menu
          document.getElementById('resume-btn').addEventListener('click', function() {
            pauseMenu.style.display = 'none';
            vrControls.style.display = 'block';
          });
          
          document.getElementById('restart-btn').addEventListener('click', function() {
            if (confirm('Are you sure you want to restart the office simulator scenario?')) {
              location.reload();
            }
          });
          
          document.getElementById('settings-btn').addEventListener('click', function() {
            alert('Settings:\n\n• Adjust volume in browser settings\n• VR headset settings in browser VR options\n• Accessibility options in browser settings');
          });
          
          document.getElementById('exit-pause-btn').addEventListener('click', function() {
            window.location.href = '../index.html';
          });
          
          // Keyboard shortcuts
          document.addEventListener('keydown', function(event) {
            switch(event.key) {
              case 'Escape':
                if (pauseMenu.style.display === 'flex') {
                  pauseMenu.style.display = 'none';
                  vrControls.style.display = 'block';
                } else {
                  pauseMenu.style.display = 'flex';
                  vrControls.style.display = 'none';
                }
                break;
              case 'Tab':
                event.preventDefault();
                vrControls.style.display = vrControls.style.display === 'none' ? 'block' : 'none';
                break;
              case 'F1':
                event.preventDefault();
                alert('Office Simulator VR Help:\n\n• Use WASD keys to move around\n• Mouse to look around\n• Click on the "Access Control" button to open/close the door\n• Press Escape to pause\n• Press Tab to toggle controls\n• Press F1 for this help');
                break;
            }
          });
          
          // Auto-hide VR controls after inactivity
          let controlsTimeout;
          function showControls() {
            vrControls.style.display = 'block';
            clearTimeout(controlsTimeout);
            controlsTimeout = setTimeout(() => {
              if (pauseMenu.style.display !== 'flex') {
                vrControls.style.display = 'none';
              }
            }, 5000);
          }
          
          document.addEventListener('mousemove', showControls);
          document.addEventListener('keydown', showControls);
          
          // Fullscreen toggle
          function toggleFullscreen() {
            if (!document.fullscreenElement) {
              document.documentElement.requestFullscreen();
            } else {
              document.exitFullscreen();
            }
          }
          
          // Add fullscreen button to VR controls
          const fullscreenBtn = document.createElement('button');
          fullscreenBtn.innerHTML = '⛶ Fullscreen';
          fullscreenBtn.style.cssText = `
            background: #8e44ad;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
          `;
          fullscreenBtn.addEventListener('click', toggleFullscreen);
          document.getElementById('vr-controls').querySelector('div').appendChild(fullscreenBtn);
          
          // VR headset detection
          if (navigator.xr) {
            navigator.xr.isSessionSupported('immersive-vr').then(function(supported) {
              if (supported) {
                console.log('VR headset supported');
              } else {
                console.log('VR headset not supported');
              }
            });
          }
          
          // Session progress tracking
          const sessionStart = Date.now();
          let interactions = 0;
          
          // Track interactions
          document.addEventListener('click', function() {
            interactions++;
          });
          
          // Save session data on exit
          window.addEventListener('beforeunload', function() {
            const sessionData = {
              scenario: 'office',
              duration: Date.now() - sessionStart,
              interactions: interactions,
              timestamp: new Date().toISOString()
            };
            
            // Save to localStorage
            const sessions = JSON.parse(localStorage.getItem('vrSessions') || '[]');
            sessions.push(sessionData);
            localStorage.setItem('vrSessions', JSON.stringify(sessions));
          });
        });
      </script>

      <!-- Sky color (neutral indoor hue) -->
      <a-sky color="#eef1f7"></a-sky>

    </a-scene>
  </body>
</html>